<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>html5表单 | TVVT</title>
  <meta name="author" content="tvvt">
  
  <meta name="description" content="相信奇迹，相信梦想">
  
  
  <meta property="og:title" content="html5表单"/>
  <meta property="og:site_name" content="TVVT"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta property="og:image" content="undefined"/>
  
   <link rel="apple-touch-icon" href="/images/6659684.png" title="TVVT" >
   <link rel="shortcut icon" href="/images/6659684.png" title="TVVT" >
   <link rel="alternate" href="/atom.xml" title="TVVT" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>-->
  <script src="/js/jquery-1.8.3.min.js"></script>
  <script src="/js/index.js"></script>
</head>


<body>
  <div id="content" class="inner clearfix">
    <aside id="sidebar" class="alignleft animated fadeInLeft">
      <div class="navigationBar">
      <a class="imgIcon" href="https://github.com/TVVT"><img src="/images/6659684.png" alt=""></a>
        <a href="/">TVVT</a>
      </div>
    	
  <div class="widget search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="text" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
  <form method="get" class="searchform" action="http://localhost:5000/">
	<input type="text" value="Type then hit enter to search" onblur="if(this.value == '') { this.value='Type then hit enter to search'}" onfocus="if (this.value == 'Type then hit enter to search') {this.value=''}" name="s" class="searchbar">
	<input type="hidden" class="searchsubmit" value="Search">
	</form><div class="clear"></div>
</div>

  <nav class="widget" id="menu">
	<ul>
    
      <li class="cell"><a class="next" href="/">Home</a><li>
    
      <li class="cell"><a class="next" href="/archives/">Archives</a><li>
    
      <li class="cell"><a class="next" href="/about/">About</a><li>
    
      <li class="cell"><a class="next" href="/atom.xml">Subscribe</a><li>
    
    </ul>
</nav>

  <div class="widget member clearfix">
	<a href="https://github.com/fangcao7618"><img src="/images/1916867.png" alt=""></a>
	<a href="https://github.com/huangkemin"><img src="/images/1684527.png" alt=""></a>
	<a href="https://github.com/wov"><img src="/images/1091511.jpeg" alt=""></a>
	<a href="https://github.com/lb1064"><img src="/images/1217562.jpeg" alt=""></a>
	<a href="https://github.com/wchaowu"><img src="/images/131735.jpeg" alt=""></a>
	<a href="https://github.com/luckyrobin"><img src="/images/3426945.jpeg" alt=""></a>
	<a href="https://github.com/kevin14"><img src="/images/2288763.png" alt=""></a>
	<a href="https://github.com/Sunny-JJ"><img src="/images/6659860.png" alt=""></a>
	<a href="https://github.com/ximan"><img src="/images/2944289.jpeg" alt=""></a>
	<a href="https://github.com/InsCake"><img src="/images/3214484.png" alt=""></a>
</div>

  

  
<div class="widget tagcloud">
  <h3 class="title">Tags</h3>
  <div class="entry">
    <a href="/tags/Effective/" style="font-size: 10.00px;">Effective</a><a href="/tags/HTML5/" style="font-size: 10.00px;">HTML5</a><a href="/tags/Hack/" style="font-size: 10.00px;">Hack</a><a href="/tags/Jade/" style="font-size: 10.00px;">Jade</a><a href="/tags/JavaScript/" style="font-size: 10.00px;">JavaScript</a><a href="/tags/Mac/" style="font-size: 10.00px;">Mac</a><a href="/tags/Mixins/" style="font-size: 10.00px;">Mixins</a><a href="/tags/Nodejs/" style="font-size: 10.00px;">Node.js</a><a href="/tags/Notes/" style="font-size: 10.00px;">Notes</a><a href="/tags/Objective-C/" style="font-size: 10.00px;">Objective-C</a><a href="/tags/Other/" style="font-size: 10.00px;">Other</a><a href="/tags/Raspberry-Pi/" style="font-size: 10.00px;">Raspberry Pi</a><a href="/tags/Sinppets/" style="font-size: 10.00px;">Sinppets</a><a href="/tags/Unix/" style="font-size: 10.00px;">Unix</a><a href="/tags/Web/" style="font-size: 10.00px;">Web</a><a href="/tags/Xcode/" style="font-size: 10.00px;">Xcode</a><a href="/tags/clang/" style="font-size: 10.00px;">clang</a><a href="/tags/easyXDM/" style="font-size: 10.00px;">easyXDM</a><a href="/tags/form/" style="font-size: 10.00px;">form</a><a href="/tags/iOS/" style="font-size: 10.00px;">iOS</a><a href="/tags/iscroll/" style="font-size: 10.00px;">iscroll</a><a href="/tags/llvm/" style="font-size: 10.00px;">llvm</a><a href="/tags/runtime/" style="font-size: 10.00px;">runtime</a><a href="/tags/svg/" style="font-size: 10.00px;">svg</a><a href="/tags/vml/" style="font-size: 10.00px;">vml</a><a href="/tags/分页控件/" style="font-size: 10.00px;">分页控件</a><a href="/tags/只读经典/" style="font-size: 10.00px;">只读经典</a><a href="/tags/图片处理/" style="font-size: 10.00px;">图片处理</a><a href="/tags/技术/" style="font-size: 10.00px;">技术</a><a href="/tags/正则表达式/" style="font-size: 10.00px;">正则表达式</a><a href="/tags/照片/" style="font-size: 20.00px;">照片</a>
  </div>
</div>


  

    	<footer id="footer" class="inner"><div class="copyright">
  
  &copy; 2014 tvvt
  
</div>


<div style="position:relative; bottom: 23px">
  <script src="http://s95.cnzz.com/stat.php?id=1&web_id=1&show=pic1" language="JavaScript">
  </script>
</div>


</footer>
    </aside>
    
    
    <div id="hidden-navigationBar" class="navigationBar">
      <a class="imgIcon" href="https://github.com/TVVT"><img src="/images/6659684.png" alt=""></a>
      <a href="/">TVVT</a>
    </div>
    <div id="main-col" class="alignright">
      <div id="wrapper" class="animated fadeInRight" >
      
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content animated fadeInRight">
  <header>
      
      
  
    <h1 class="title">html5表单</h1>
  

      <time datetime="2014-06-11T08:03:42.000Z"><a href="/2014/06/11/form/">Jun 11 2014</a></time>
      
  </header>

<div class="entry ">


    <!--toc--> 
    
    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#不支持的浏览器"><span class="toc-number">1.</span> <span class="toc-text">不支持的浏览器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#input吐槽"><span class="toc-number">2.</span> <span class="toc-text">input吐槽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#表单验证"><span class="toc-number">3.</span> <span class="toc-text">表单验证</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用css定义字段是否合法的样式"><span class="toc-number">4.</span> <span class="toc-text">使用css定义字段是否合法的样式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#正则表达式"><span class="toc-number">5.</span> <span class="toc-text">正则表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#改变其他元素的样式"><span class="toc-number">6.</span> <span class="toc-text">改变其他元素的样式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ajax提交表单"><span class="toc-number">7.</span> <span class="toc-text">ajax提交表单</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#总结"><span class="toc-number">8.</span> <span class="toc-text">总结</span></a></li></ol>
    </div>
    
    <!--end-->
  <p>对于h5的表单，大家应该不会感到非常陌生。</p>
<p>具体的例子可以看<a href="http://eizia.sinaapp.com/?dir=html5&page=from" target="_blank">http://eizia.sinaapp.com/?dir=html5&amp;page=from</a><br><a id="more"></a><br>也建议使用移动设备看下效果。你也可以直接扫描：</p>
<p><img src="http://chart.apis.google.com/chart?cht=qr&chl=http%3A%2F%2Feizia.sinaapp.com%2F%3Fdir%3Dhtml5%26page%3Dfrom&chs=200x200"></p>
<p>在ios上，不同的type会调出相应的键盘。</p>
<p>可以有效减少用户切换输入。</p>
<h4 id="不支持的浏览器">不支持的浏览器</h4>
<p>对于那些古董的浏览器（不是所有的古董都是好东西）来说，虽然不支持新的type，但是都默认当成’text’来处理。所以在这里还是要感谢一下微软先前没有做的那么死。</p>
<h4 id="input吐槽">input吐槽</h4>
<p>这里就不得不吐槽下apple，input type=file 很简单的文件上传直到ios6才支持。（可能不太简单吧-_-|||）</p>
<p>好吧。目前看到wp8上也不支持，囧！</p>
<h4 id="表单验证">表单验证</h4>
<p>h5的表单支持验证，你可以在<a href="http://eizia.sinaapp.com/?dir=html5&page=from" target="_blank">实例页面</a>没有填写任何字段的时候点下最下面的提交按钮看下。</p>
<p>如果不出意外的话（这里的意外就是你在用ie系列，或者套壳的ie），浏览器会提示你有个必填字段并没有填。</p>
<p>这里的提示的前提是你真正的去提交一张表单。但问题是：自从web2.0(其实我讨厌这个唬人的概念，但是又不得不这样说。)，我们已经很少使用form原生提交了。原因是原生的提交会造成页面刷新，影响用户体验。</p>
<hr>
<p>那么我们来看看如何使用AJAX来提交一张表单吧。</p>
<h4 id="使用css定义字段是否合法的样式">使用css定义字段是否合法的样式</h4>
<pre><code><span class="tag">input</span><span class="pseudo">:focus</span><span class="pseudo">:required</span><span class="pseudo">:invalid</span><span class="rules">{
    <span class="comment">/*your style here*/</span>
<span class="rule">}</span></span>

<span class="tag">input</span><span class="pseudo">:required</span><span class="pseudo">:valid</span><span class="rules">{
    <span class="comment">/*your style here*/</span>
<span class="rule">}</span></span>
</code></pre><p>其他的伪类还有：</p>
<p>1.valid<br>1.invalid<br>1.required<br>1.optional<br>1.in-range<br>1.out-of-range<br>1.read-only<br>1.read-write</p>
<p>值得一提的是 这个在ios上是支持的。（版本未测）</p>
<h4 id="正则表达式">正则表达式</h4>
<p>对于常用的type，浏览器支持的已经可以了，但是难免会遇到复杂的情况。这里的正则其实不是写在js里。而是直接写在html里。</p>
<pre><code>&lt;input id=<span class="string">"password"</span> name=<span class="string">"password"</span> <span class="typedef"><span class="keyword">type</span>="password" required pattern="<span class="container">(?=^.{8,}$)</span><span class="container">((?=.*\<span class="title">d</span>)</span>|<span class="container">(?=.*\<span class="type">W</span>+)</span>)<span class="container">(?![.\<span class="title">n</span>])</span><span class="container">(?=.*[<span class="type">A</span>-<span class="type">Z</span>])</span><span class="container">(?=.*[<span class="title">a</span>-<span class="title">z</span>])</span>.*" /&gt;</span>
</code></pre><p>这样避免了js来回读取dom，是不是感觉一下子高效了很多。</p>
<h4 id="改变其他元素的样式">改变其他元素的样式</h4>
<p>前面讲的伪类只影响input本身的样式。但是光这样可能满足不了产品经理挑剔的需求。废话不说，看代码应该就明白了</p>
<p>html：</p>
<pre><code><span class="tag">&lt;<span class="title">input</span> <span class="attribute">id</span>=<span class="value">"password"</span> <span class="attribute">type</span>=<span class="value">"password"</span>  /&gt;</span>
<span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"validation01"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"invalid"</span>&gt;</span>你的密码有误<span class="tag">&lt;/<span class="title">span</span>&gt;</span>
    <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"valid"</span>&gt;</span>正确<span class="tag">&lt;/<span class="title">span</span>&gt;</span>
<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
</code></pre><p>css：</p>
<pre><code><span class="class">.validation01</span> <span class="rules">{
  <span class="comment">/*style here*/</span>
<span class="rule">}</span></span>
<span class="tag">input</span><span class="pseudo">:focus</span> + <span class="class">.validation01</span> <span class="rules">{
  <span class="comment">/*style here*/</span>
<span class="rule">}</span></span>
<span class="tag">input</span><span class="pseudo">:focus</span><span class="pseudo">:required</span><span class="pseudo">:valid</span> + <span class="class">.validation01</span> <span class="rules">{
  <span class="comment">/*style here*/</span>
<span class="rule">}</span></span>
<span class="tag">input</span><span class="pseudo">:focus</span><span class="pseudo">:required</span><span class="pseudo">:valid</span> + <span class="class">.validation01</span> <span class="class">.invalid</span> <span class="rules">{
  <span class="comment">/*style here*/</span>
<span class="rule">}</span></span>
<span class="tag">input</span><span class="pseudo">:focus</span><span class="pseudo">:required</span><span class="pseudo">:invalid</span> + <span class="class">.validation01</span> <span class="class">.valid</span> <span class="rules">{
  <span class="comment">/*style here*/</span>
<span class="rule">}</span></span>
</code></pre><p>这样应该是比较常见的业务逻辑了吧。</p>
<h4 id="ajax提交表单">ajax提交表单</h4>
<p>接下来就是提交了。</p>
<p>由于是使用ajax提交，所以我们必须自己先要验证表单的合法性。</p>
<p>JS代码如下：</p>
<pre><code><span class="keyword">var</span> _login_btn = document.querySelector(<span class="string">'.login_btn'</span>); <span class="comment">//获取按钮</span>
_login_btn.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
    <span class="keyword">var</span> _form = document.querySelector(<span class="string">'.login_form'</span>); <span class="comment">//获取表单对象</span>
    <span class="keyword">if</span>(!_form.checkValidity()){ <span class="comment">//_form.checkValidity 是原生的方法 返回true 和 false</span>
        alert(<span class="string">'请正确输入表单'</span>);
        <span class="keyword">return</span>;
    };

    <span class="comment">//如果通过验证这提交这个表单</span>

    <span class="comment">//todo</span>
},<span class="literal">false</span>);
</code></pre><p>好了，终于到了最后的提交了。</p>
<p>我们把上面那个代码写完整，仔细看看不一样的地方。</p>
<pre><code><span class="keyword">var</span> _login_btn = document.querySelector(<span class="string">'.login_btn'</span>); <span class="comment">//获取按钮</span>
_login_btn.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
    <span class="keyword">var</span> _form = document.querySelector(<span class="string">'.login_form'</span>); <span class="comment">//获取表单对象</span>
    <span class="keyword">if</span>(!_form.checkValidity()){ <span class="comment">//_form.checkValidity 是原生的方法 返回true 和 false</span>
        alert(<span class="string">'请正确输入表单'</span>);
        <span class="keyword">return</span>;
    };

    <span class="comment">//如果通过验证这提交这个表单</span>

    <span class="keyword">var</span> _formdata = <span class="keyword">new</span> FormData(_form); <span class="comment">//这是h5新支持的表单对象。你可以去google "FormData"     </span>

    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();
    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
        <span class="keyword">if</span>(xhr.readyState === <span class="number">4</span>){
            <span class="comment">//success here</span>
        }
      };
      xhr.open(<span class="string">'POST'</span>,url); <span class="comment">//url 是表单的提交地址。</span>
    xhr.send(_formdata);
},<span class="literal">false</span>);
</code></pre><p>好了，这里就大功告成了。感谢formdata为我们直接提交了表单。我们可以多出很多时间去浏览新浪微博了（不过LZ本人可是完全弃用微博，把时间花在了玩3ds上了）。当然这样做的耦合性也非常棒。现在就算产品经理需要填充／剔除表单的字段。忙的就不再是前端了。毕竟我们只要改一点点就ok了。脚本完全可以不用动。看着后台同学瞎忙也是很好玩的一件事情啊&gt;_&lt;</p>
<p>PS:formdata 支持添加一些表单中不存在的字段。如：</p>
<pre><code>_formdata.append(name,<span class="keyword">value</span>);
</code></pre><hr>
<h4 id="总结">总结</h4>
<p>表单这个东西其实困扰前端很久的一个东西。这里涉及到的东西还是蛮多的，具体的要大家实践才行。如文中有错误的地方也请指正，不胜感激。</p>
<p>PS：另外再新的浏览器只要加入以下css</p>
<pre><code><span class="tag">input</span>, <span class="tag">textarea</span>, <span class="tag">select</span> <span class="rules">{
   <span class="rule"><span class="attribute">-webkit-appearance</span>:<span class="value"> none</span></span>;
<span class="rule">}</span></span>
</code></pre><p>就可以自定义你想要的样式了。是不是很方便呢。</p>


  
    <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/u/2120066534/home?wvr=5&amp;s=6cm7D0"><strong>施峰峰</strong></a> - Jun 11 2014</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://yoursite.com"><strong>TVVT</strong></a></span>
</p>
  


</div>

    <!--<div class="entry">
      
      <p>对于h5的表单，大家应该不会感到非常陌生。</p>
<p>具体的例子可以看<a href="http://eizia.sinaapp.com/?dir=html5&page=from" target="_blank">http://eizia.sinaapp.com/?dir=html5&amp;page=from</a><br><a id="more"></a><br>也建议使用移动设备看下效果。你也可以直接扫描：</p>
<p><img src="http://chart.apis.google.com/chart?cht=qr&chl=http%3A%2F%2Feizia.sinaapp.com%2F%3Fdir%3Dhtml5%26page%3Dfrom&chs=200x200"></p>
<p>在ios上，不同的type会调出相应的键盘。</p>
<p>可以有效减少用户切换输入。</p>
<h4 id="不支持的浏览器">不支持的浏览器</h4>
<p>对于那些古董的浏览器（不是所有的古董都是好东西）来说，虽然不支持新的type，但是都默认当成’text’来处理。所以在这里还是要感谢一下微软先前没有做的那么死。</p>
<h4 id="input吐槽">input吐槽</h4>
<p>这里就不得不吐槽下apple，input type=file 很简单的文件上传直到ios6才支持。（可能不太简单吧-_-|||）</p>
<p>好吧。目前看到wp8上也不支持，囧！</p>
<h4 id="表单验证">表单验证</h4>
<p>h5的表单支持验证，你可以在<a href="http://eizia.sinaapp.com/?dir=html5&page=from" target="_blank">实例页面</a>没有填写任何字段的时候点下最下面的提交按钮看下。</p>
<p>如果不出意外的话（这里的意外就是你在用ie系列，或者套壳的ie），浏览器会提示你有个必填字段并没有填。</p>
<p>这里的提示的前提是你真正的去提交一张表单。但问题是：自从web2.0(其实我讨厌这个唬人的概念，但是又不得不这样说。)，我们已经很少使用form原生提交了。原因是原生的提交会造成页面刷新，影响用户体验。</p>
<hr>
<p>那么我们来看看如何使用AJAX来提交一张表单吧。</p>
<h4 id="使用css定义字段是否合法的样式">使用css定义字段是否合法的样式</h4>
<pre><code><span class="tag">input</span><span class="pseudo">:focus</span><span class="pseudo">:required</span><span class="pseudo">:invalid</span><span class="rules">{
    <span class="comment">/*your style here*/</span>
<span class="rule">}</span></span>

<span class="tag">input</span><span class="pseudo">:required</span><span class="pseudo">:valid</span><span class="rules">{
    <span class="comment">/*your style here*/</span>
<span class="rule">}</span></span>
</code></pre><p>其他的伪类还有：</p>
<p>1.valid<br>1.invalid<br>1.required<br>1.optional<br>1.in-range<br>1.out-of-range<br>1.read-only<br>1.read-write</p>
<p>值得一提的是 这个在ios上是支持的。（版本未测）</p>
<h4 id="正则表达式">正则表达式</h4>
<p>对于常用的type，浏览器支持的已经可以了，但是难免会遇到复杂的情况。这里的正则其实不是写在js里。而是直接写在html里。</p>
<pre><code>&lt;input id=<span class="string">"password"</span> name=<span class="string">"password"</span> <span class="typedef"><span class="keyword">type</span>="password" required pattern="<span class="container">(?=^.{8,}$)</span><span class="container">((?=.*\<span class="title">d</span>)</span>|<span class="container">(?=.*\<span class="type">W</span>+)</span>)<span class="container">(?![.\<span class="title">n</span>])</span><span class="container">(?=.*[<span class="type">A</span>-<span class="type">Z</span>])</span><span class="container">(?=.*[<span class="title">a</span>-<span class="title">z</span>])</span>.*" /&gt;</span>
</code></pre><p>这样避免了js来回读取dom，是不是感觉一下子高效了很多。</p>
<h4 id="改变其他元素的样式">改变其他元素的样式</h4>
<p>前面讲的伪类只影响input本身的样式。但是光这样可能满足不了产品经理挑剔的需求。废话不说，看代码应该就明白了</p>
<p>html：</p>
<pre><code><span class="tag">&lt;<span class="title">input</span> <span class="attribute">id</span>=<span class="value">"password"</span> <span class="attribute">type</span>=<span class="value">"password"</span>  /&gt;</span>
<span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"validation01"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"invalid"</span>&gt;</span>你的密码有误<span class="tag">&lt;/<span class="title">span</span>&gt;</span>
    <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"valid"</span>&gt;</span>正确<span class="tag">&lt;/<span class="title">span</span>&gt;</span>
<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
</code></pre><p>css：</p>
<pre><code><span class="class">.validation01</span> <span class="rules">{
  <span class="comment">/*style here*/</span>
<span class="rule">}</span></span>
<span class="tag">input</span><span class="pseudo">:focus</span> + <span class="class">.validation01</span> <span class="rules">{
  <span class="comment">/*style here*/</span>
<span class="rule">}</span></span>
<span class="tag">input</span><span class="pseudo">:focus</span><span class="pseudo">:required</span><span class="pseudo">:valid</span> + <span class="class">.validation01</span> <span class="rules">{
  <span class="comment">/*style here*/</span>
<span class="rule">}</span></span>
<span class="tag">input</span><span class="pseudo">:focus</span><span class="pseudo">:required</span><span class="pseudo">:valid</span> + <span class="class">.validation01</span> <span class="class">.invalid</span> <span class="rules">{
  <span class="comment">/*style here*/</span>
<span class="rule">}</span></span>
<span class="tag">input</span><span class="pseudo">:focus</span><span class="pseudo">:required</span><span class="pseudo">:invalid</span> + <span class="class">.validation01</span> <span class="class">.valid</span> <span class="rules">{
  <span class="comment">/*style here*/</span>
<span class="rule">}</span></span>
</code></pre><p>这样应该是比较常见的业务逻辑了吧。</p>
<h4 id="ajax提交表单">ajax提交表单</h4>
<p>接下来就是提交了。</p>
<p>由于是使用ajax提交，所以我们必须自己先要验证表单的合法性。</p>
<p>JS代码如下：</p>
<pre><code><span class="keyword">var</span> _login_btn = document.querySelector(<span class="string">'.login_btn'</span>); <span class="comment">//获取按钮</span>
_login_btn.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
    <span class="keyword">var</span> _form = document.querySelector(<span class="string">'.login_form'</span>); <span class="comment">//获取表单对象</span>
    <span class="keyword">if</span>(!_form.checkValidity()){ <span class="comment">//_form.checkValidity 是原生的方法 返回true 和 false</span>
        alert(<span class="string">'请正确输入表单'</span>);
        <span class="keyword">return</span>;
    };

    <span class="comment">//如果通过验证这提交这个表单</span>

    <span class="comment">//todo</span>
},<span class="literal">false</span>);
</code></pre><p>好了，终于到了最后的提交了。</p>
<p>我们把上面那个代码写完整，仔细看看不一样的地方。</p>
<pre><code><span class="keyword">var</span> _login_btn = document.querySelector(<span class="string">'.login_btn'</span>); <span class="comment">//获取按钮</span>
_login_btn.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
    <span class="keyword">var</span> _form = document.querySelector(<span class="string">'.login_form'</span>); <span class="comment">//获取表单对象</span>
    <span class="keyword">if</span>(!_form.checkValidity()){ <span class="comment">//_form.checkValidity 是原生的方法 返回true 和 false</span>
        alert(<span class="string">'请正确输入表单'</span>);
        <span class="keyword">return</span>;
    };

    <span class="comment">//如果通过验证这提交这个表单</span>

    <span class="keyword">var</span> _formdata = <span class="keyword">new</span> FormData(_form); <span class="comment">//这是h5新支持的表单对象。你可以去google "FormData"     </span>

    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();
    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
        <span class="keyword">if</span>(xhr.readyState === <span class="number">4</span>){
            <span class="comment">//success here</span>
        }
      };
      xhr.open(<span class="string">'POST'</span>,url); <span class="comment">//url 是表单的提交地址。</span>
    xhr.send(_formdata);
},<span class="literal">false</span>);
</code></pre><p>好了，这里就大功告成了。感谢formdata为我们直接提交了表单。我们可以多出很多时间去浏览新浪微博了（不过LZ本人可是完全弃用微博，把时间花在了玩3ds上了）。当然这样做的耦合性也非常棒。现在就算产品经理需要填充／剔除表单的字段。忙的就不再是前端了。毕竟我们只要改一点点就ok了。脚本完全可以不用动。看着后台同学瞎忙也是很好玩的一件事情啊&gt;_&lt;</p>
<p>PS:formdata 支持添加一些表单中不存在的字段。如：</p>
<pre><code>_formdata.append(name,<span class="keyword">value</span>);
</code></pre><hr>
<h4 id="总结">总结</h4>
<p>表单这个东西其实困扰前端很久的一个东西。这里涉及到的东西还是蛮多的，具体的要大家实践才行。如文中有错误的地方也请指正，不胜感激。</p>
<p>PS：另外再新的浏览器只要加入以下css</p>
<pre><code><span class="tag">input</span>, <span class="tag">textarea</span>, <span class="tag">select</span> <span class="rules">{
   <span class="rule"><span class="attribute">-webkit-appearance</span>:<span class="value"> none</span></span>;
<span class="rule">}</span></span>
</code></pre><p>就可以自定义你想要的样式了。是不是很方便呢。</p>

	    
	    <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/u/2120066534/home?wvr=5&amp;s=6cm7D0"><strong>施峰峰</strong></a> - Jun 11 2014</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://yoursite.com"><strong>TVVT</strong></a></span>
</p>
      
      
    </div>-->
    <footer>
      
	 
     		  
       		
  
  <div class="tags">
    <a href="/tags/form/">form</a>, <a href="/tags/Effective/">Effective</a>, <a href="/tags/Objective-C/">Objective-C</a>, <a href="/tags/HTML5/">HTML5</a>, <a href="/tags/Hack/">Hack</a>, <a href="/tags/JavaScript/">JavaScript</a>, <a href="/tags/Mac/">Mac</a>, <a href="/tags/Nodejs/">Node.js</a>, <a href="/tags/Notes/">Notes</a>, <a href="/tags/Objective-C/">Objective-C</a>, <a href="/tags/Other/">Other</a>, <a href="/tags/Raspberry-Pi/">Raspberry Pi</a>, <a href="/tags/Sinppets/">Sinppets</a>, <a href="/tags/Unix/">Unix</a>, <a href="/tags/Web/">Web</a>, <a href="/tags/Xcode/">Xcode</a>, <a href="/tags/clang/">clang</a>, <a href="/tags/iOS/">iOS</a>, <a href="/tags/llvm/">llvm</a>, <a href="/tags/runtime/">runtime</a>, <a href="/tags/只读经典/">只读经典</a>, <a href="/tags/正则表达式/">正则表达式</a>
  </div>

     		  
<!-- JiaThis Button BEGIN -->
<div class="jiathis_style addthis addthis_toolbox addthis_default_style" style="color: black">
	<span class="jiathis_txt"></span>
	<a class="jiathis_button_tools_1"></a>
	<a class="jiathis_button_tools_2"></a>
	<a class="jiathis_button_tools_3"></a>
	<a class="jiathis_button_tools_4"></a>
	<a href="http://www.jiathis.com/share?uid=1784645" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript">
var jiathis_config = {data_track_clickback:'true'};
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=2120066534" charset="utf-8"></script>
<!-- JiaThis Button END -->

       	 
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>
<div id="uyan_frame"></div>
<script type="text/javascript" id="UYScript" src="http://v1.uyan.cc/js/iframe.js?UYUserId=1" async=""></script>
</section>


      </div>
      <div id="totop" style="position:fixed;bottom:50px;right:30px;cursor: pointer;">
<a title="返回顶部"><img src="/images/scrollup.png"/></a>
</div>
      <script src="/js/totop.js"></script>
    </div>
    <div class="tabbar" onload="divideTabBar()">
	
      <div class="tabbaritem"><a class="next" href="/">Home</a></div>
    
      <div class="tabbaritem"><a class="next" href="/archives/">Archives</a></div>
    
      <div class="tabbaritem"><a class="next" href="/about/">About</a></div>
    
      <div class="tabbaritem"><a class="next" href="/atom.xml">Subscribe</a></div>
    
</div>


  </div>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>
</html>